<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ex005</title>
</head>
<body>
    <h1>ex005</h1>
    <p>Desenvolva uma calculadora que implemente as 4 funções básicas, tal que o usuário informa 2 valores na tela, seleciona uma das operações e o resultado é apresentado na tela. Implemente um botão para cada valor e um botão para cada operação. Se o usuário apertar o botão relativo a uma operação após o calculo de um resultado a calculadora deve usar o resultado obtido anteriormente como o primeiro valor da próxima operação assim como acontece em uma calculadora convencional. Observação: Nesta atividade o usuário não irá digitar nenhum valor, apenas pressionar os botões.</p>

    <h2>a (operação) b =</h2>
    
    <div id="numeros">
        <button id="num0" value="0">0</button>
        <button id="num1" value="1">1</button>
        <button id="num2" value="2">2</button>
        <button id="num3" value="3">3</button>
        <button id="num4" value="4">4</button>
        <button id="num5" value="5">5</button>
        <button id="num6" value="6">6</button>
        <button id="num7" value="7">7</button>
        <button id="num8" value="8">8</button>
        <button id="num9" value="9">9</button>
    </div>

    <div id="operacoes" style="margin-top: 10px;">
        <button id="soma" value="+">+</button>
        <button id="sub" value="-">-</button>
        <button id="mult" value="*">*</button>
        <button id="div" value="/">/</button>
        <button id="igual" value="=">=</button>
        <button id="limpar">Limpar</button>
    </div>

    <p id="saida"></p>

    <script>
        var cont = 0;
        var escolhas = []
        var operacao = ""
        var resultado = 0;

        let limparTexto = function(){
            cont = 0
            escolhas = []
            operacao = ""
            resultado = 0
            let saida = document.querySelector("#saida")
            saida.innerHTML = ""
        }

        let escolheNum = function(event) {
            let num = event.target
            let saida = document.querySelector("#saida")
            
            if(cont == 0){
                limparTexto()
            }
            escolhas[cont] = num.value
            cont++;
            
            saida.innerHTML += num.value + " "
        }

        let escolheOperacao = function(event){
            let op = event.target
            let saida = document.querySelector("#saida")

            if(cont == 1){
                operacao = op.value
                saida.innerHTML += op.value + " "
            }
            else if(cont == 2){
                if(operacao == '+'){
                    resultado = parseInt(escolhas[0]) + parseInt(escolhas[1])
                }else if(operacao == '-'){
                    resultado = parseInt(escolhas[0]) - parseInt(escolhas[1])
                }else if(operacao == '*'){
                    resultado = parseInt(escolhas[0]) * parseInt(escolhas[1])
                }else if(operacao == '/'){
                    resultado = parseInt(escolhas[0]) / parseInt(escolhas[1])
                }
                if(op.value == '='){
                    let guardaResult = resultado
                    limparTexto()
                    escolhas[0] = guardaResult
                    cont = 1
                    saida.innerHTML += guardaResult + " "
                }
            }   
        }

        window.onload = function(){
            let soma = document.querySelector("#soma")
            let sub = document.querySelector("#sub")
            let mult = document.querySelector("#mult")
            let div = document.querySelector("#div")
            let igual = document.querySelector("#igual")

            soma.addEventListener('click', escolheOperacao)
            sub.addEventListener('click', escolheOperacao)
            mult.addEventListener('click', escolheOperacao)
            div.addEventListener('click', escolheOperacao)
            igual.addEventListener('click', escolheOperacao)
            limpar.addEventListener('click', limparTexto)

            let num0 = document.querySelector("#num0")
            let num1 = document.querySelector("#num1")
            let num2 = document.querySelector("#num2")
            let num3 = document.querySelector("#num3")
            let num4 = document.querySelector("#num4")
            let num5 = document.querySelector("#num5")
            let num6 = document.querySelector("#num6")
            let num7 = document.querySelector("#num7")
            let num8 = document.querySelector("#num8")
            let num9 = document.querySelector("#num9")

            num0.addEventListener('click', escolheNum)
            num1.addEventListener('click', escolheNum)
            num2.addEventListener('click', escolheNum)
            num3.addEventListener('click', escolheNum)
            num4.addEventListener('click', escolheNum)
            num5.addEventListener('click', escolheNum)
            num6.addEventListener('click', escolheNum)
            num7.addEventListener('click', escolheNum)
            num8.addEventListener('click', escolheNum)
            num9.addEventListener('click', escolheNum)
        }
    </script>
</body>
</html>